<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Class Bossfight — Review Mode</title>
  <link rel="stylesheet" href="assets/css/bossfight.css" />
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Bossfight</h1>
      <span class="chip">Press <b>.</b> to toggle Teacher Dock · <b>1/2/3</b> = Hit · <b>Alt+1/2/3</b> = Miss</span>
      <span class="sp"></span>
      <div class="chips">
        <span class="pill" id="qChip" hidden>Q: <strong id="qNum">1</strong></span>
        <span class="pill" id="timerChip" hidden>⏱ <strong id="timerText">00:00</strong></span>
        <button id="btnSliders" class="pill" aria-expanded="false" title="Show controls" style="margin-right:8px;">Adjust Boss ▾</button>
        <div id="sliderMenu" hidden>
          <label for="bossXSlider" style="display:flex; align-items:center; gap:6px; font-size:13px; color:var(--muted);">
            <span>Left/Right</span>
            <input type="range" id="bossXSlider" min="-1000" max="1000" step="1" value="0" style="width:180px;">
          </label>
          <label for="bossYSlider" style="display:flex; align-items:center; gap:6px; font-size:13px; color:var(--muted);">
            <span>Up/Down</span>
            <input type="range" id="bossYSlider" min="-1000" max="1000" step="1" value="0" style="width:180px;">
          </label>
          <label for="bossSizeSlider" style="display:flex; align-items:center; gap:4px; font-size:13px; color:var(--muted);">
            <span>Boss Size</span>
            <input type="range" id="bossSizeSlider" min="0.5" max="2" step="0.01" value="1" style="width:80px;">
          </label>
        </div>
        <button class="btn" id="btnConfig" title="Configure (G)">⚙️ Config</button>
      </div>
    </header>

    <main class="stage">
      <section class="bossPane">
        <div class="bossHeader">
          <div class="hp" id="bossHP"></div>
          <div class="bossName" id="bossName">Ancient Drake</div>
        </div>
        <div class="bossView">
          <div class="bossImg">
            <img id="bossImg" alt="Boss"/>
            <div class="flashHit" id="flash"></div>
          </div>
        </div>
      </section>

      <aside class="side">
        <div class="panel">
          <h3>Guilds</h3>
          <div class="guilds" id="guildList"></div>
        </div>
        <div class="panel" id="dock">
          <h3>Teacher Dock</h3>
          <div style="padding:8px 12px; color:var(--muted); font-size:12px">Fight Controls</div>
          <div id="dockBtns"></div>
          <div class="gBtnRow">
            <button class="btn full" id="btnUndo">↶ Undo (U)</button>
            <button class="btn full" id="btnReset">Reset Fight (R)</button>
            <button class="btn full" id="btnToggleQ">Toggle Question Chip (Q)</button>
            <button class="btn full" id="btnToggleTimer">Start/Pause Timer (T)</button>
          </div>
        </div>
      </aside>
    </main>

    <footer style="padding:10px 16px; color:var(--muted); display:flex; align-items:center; gap:10px">
      <span class="help">Hidden controls: <b>1/2/3</b> Hit · <b>Alt+1/2/3</b> Miss · <b>U</b> Undo · <b>R</b> Reset · <b>G</b> Config (choose subject pack) · <b>T</b> Timer · <b>Q</b> Toggle question chip</span>
      <span class="sp"></span>
      <label style="display:flex; align-items:center; gap:8px; cursor:pointer">
        <input type="checkbox" id="muteToggle"/> Mute SFX
      </label>
    </footer>
  </div>

  <div class="panel" id="logPanel" style="display:none">
    <h3>Event Log</h3>
    <div class="log" id="log"></div>
  </div>

  <dialog id="cfgDlg">
    <form method="dialog" class="cfg" id="cfgForm">
      <section>
        <h4>Boss Settings</h4>
        <div class="row"><label>Boss Name</label><input type="text" id="cfgBossName" value="Ancient Drake"></div>
        <div class="row"><label>Boss Hearts</label>
          <span>
            <input type="number" id="cfgBossHP" min="1" max="20" value="8">
            <small style="color:var(--muted); margin-left:6px">Enter 1–20. You can change mid-fight.</small>
          </span>
        </div>
        <div class="row"><label>Image Pack</label>
          <div style="display:grid; gap:8px">
            <select id="cfgSubject">
              <option value="math">Math</option>
              <option value="phonics">Phonics</option>
              <option value="story-comprehension">Story Comprehension</option>
            </select>
          </div>
        </div>
        <div class="row"><label>Background</label>
          <div style="display:grid; gap:8px">
            <select id="cfgBackground">
              <option value="__default__">Default</option>
            </select>
          </div>
        </div>
      </section>

      <section>
        <h4>Guilds & Audio</h4>
        <div id="guildCfg"></div>
      </section>

      <div class="actions">
        <button class="btn" value="cancel">Cancel</button>
        <button class="btn" id="btnSaveCfg" value="default">Save</button>
      </div>
    </form>
  </dialog>

  <div class="banner" id="victory">
    <div class="bannerCard">
      <h2 id="victoryTitle">Boss Defeated!</h2>
      <p id="victorySub">Final blow by <b>Guild</b>. Top contributor: <b>Guild</b>.</p>
      <div style="margin-top:14px"><button class="btn" id="victoryClose">Close</button></div>
    </div>
  </div>

  <script src="assets/js/bossfight.js" defer></script>
</body>
</html>
